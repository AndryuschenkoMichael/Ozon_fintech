# Ozon_fintech

## Как запустить программу?
Тут все просто: склонируйте репозиторий и в корневой папке введите:

    docker compose up

Для выбора хранилища для ссылок нужно зайти в docker-compose.yml и поменять на нужное хранилище:

    # Режим работы, где в качестве хранилища POSTGRES
    command: ./Links -db_type POSTGRES

    # Режим работы, где в качестве хранилища STORAGE(собственное хранилище)
    command: ./Links -db_type STORAGE
    
К сожалению, команда docker compose не позволяет задавать флаги командной строки, но приложение флаги, конечно, поддерживает. Вид флага:

    -db_type STORAGE, либо -db_type POSTGRES
    
## Каковы характеристики системы?
Подойдет любой компьютер на котором уже стоит Docker

Для корректной работы приложения, должны быть свободны порты:
+ 8000
+ 8080
+ 5432
+ 5436

## Как посылать запросы?
Api задокументировано с помощью Swagger. Там можно посмотреть типы запросов, маленькие примеры и поотправлять их.

Swagger находится по ссылке: 

    http://localhost:8000/swagger/index.html
    
## Немного про реализацию:

В своем маленьком проекте я использовал "чистую архитектуру" и придерживался принципам SOLID.
Решил реализовать 2 метода генерации сокращенных ссылок, у каждого из которых есть свои плюсы и минусы:
1. Генерурются псевдо случайные строки заданной длины. Из плюсов: не требует дополнительной синхронизации, красиво выглядят. Из минусов: могут быть повторения.
2. Каждая следующая строка генерируется из текущей по определенному алгоритму(похоже на перестановки). Из плюсов: повторений быть не может. Из минусов: требует дополнительной синхронизации.

Я остановился на 1 варианте. Т.к. синхронизация требует затрат производительности, да и веротность, что из 63**10 значений попадутся одинаковые очень мала.

Метод Post возвращает ошибку 405(Method not allowed) при попытке создать сокращенную ссылку для полной, если такова уже существует. Сделано это так, потому что метод Post, в идеале, при успешном ответе
должен добавлять в систему новое значение. Но ради удобства в тексте ошибки последним параметром выдается сокращенная ссылка, если полная уже существует в системе.

Вроде больше никаких особенностей в реализации нет.
